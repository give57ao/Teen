--테이블 작성과 시퀀스 생성

CREATE TABLE BOARD(
    BOARD_NO NUMBER NOT NULL,
    MEMBER_NO NUMBER NOT NULL,
    BOARD_TITLE VARCHAR2(60) NOT NULL,
    BOARD_CONTENT VARCHAR2(4000) NOT NULL,
    BOARD_DATE DATE NOT NULL,
    BOARD_HIT_COUNT NUMBER NOT NULL,
    BOARD_LIKE_COUNT NUMBER NOT NULL,
    BOARD_REPORT_COUNT NUMBER NOT NULL,
    BOARD_FILE_CHECK VARCHAR2(2) NOT NULL,
    BOARD_GROUP_NO NUMBER NOT NULL,
    BOARD_TAG_NO VARCHAR2(10) NOT NULL
);
CREATE SEQUENCE SEQ_BOARD_NO INCREMENT BY 1 START WITH 1;


CREATE TABLE BCOMMENT(
    BCOMMENT_NO NUMBER NOT NULL,
    BOARD_NO NUMBER NOT NULL,
    BOARD_GROUP_NO NUMBER NOT NULL,
    BCOMMENT_CONTENT VARCHAR2(4000) NOT NULL,
    BCOMMENT_DATE DATE NOT NULL,
    MEMBER_NO NUMBER NOT NULL,
    BOCOMMENT_REPORT_COUNT NUMBER NOT NULL,
    BCOMMENT_LIKE_COUNT NUMBER NOT NULL,
    REF_NO NUMBER NOT NULL,
    REF_STEP NUMBER NOT NULL,
    REF_LEVEL NUMBER NOT NULL
);
CREATE SEQUENCE SEQ_BCOMMENT_NO INCREMENT BY 1 START WITH 1;

CREATE TABLE BFILE (
    FILE_NO NUMBER NOT NULL,
    BOARD_NO NUMBER ,
    ORG_FILE_NAME VARCHAR2(40) NOT NULL,
    STORED_FILE_NAME VARCHAR2(50) NOT NULL,
    FILE_SIZE NUMBER NOT NULL,
    FILE_DATE DATE NOT NULL,
    DEL_GB VARCHAR2(1) DEFAULT 'N',
    NOTI_NO NUMBER ,
    BCOMMENT_NO NUMBER
);

CREATE SEQUENCE SEQ_FILE_NO INCREMENT BY 1 START WITH 1;


CREATE TABLE NOTICE (
    NOTI_NO NUMBER NOT NULL,
    MEMBER_NO NUMBER NOT NULL,
    NOTI_TITLE VARCHAR2(60) NOT NULL,
    NOTI_CONTENT VARCHAR2(4000) NOT NULL,
    NOTI_DATE DATE NOT NULL,
    NOTI_HIT_COUNT NUMBER NOT NULL,
    NOTI_FILE_CHECK VARCHAR2(1) DEFAULT 'N'
);


CREATE SEQUENCE SEQ_NOTICE_NO INCREMENT BY 1 START WITH 1;


CREATE TABLE MEMBER(
  MEMBER_NO NUMBER NOT NULL,
  MEMBER_ID VARCHAR2(20) NOT NULL,
  MEMBER_PW VARCHAR2(20) NOT NULL,
  MEMBER_NAME VARCHAR2(30) NOT NULL,
  MEMBER_EMAIL VARCHAR2(50) NOT NULL,
  MEMBER_EMAIL_CHECK VARCHAR2(1) DEFAULT 'N', 
  MEMBER_NICK VARCHAR2(12) NOT NULL,
  MEMBER_ADMIN VARCHAR2(1) DEFAULT 'N',
  MEMBER_DATE DATE NOT NULL,
  MEMBER_PRO_CHECK VARCHAR2(1) DEFAULT 'N',
  MEMBER_POINT NUMBER
);

CREATE SEQUENCE SEQ_MEMBER_NO INCREMENT BY 1 START WITH 1;

CREATE TABLE ALARM(
  ALARM_NO NUMBER NOT NULL,
  MEMBER_NO NUMBER NOT NULL,
  BCOMMENT_NO NUMBER NOT NULL,
  ALARM_DATE DATE NOT NULL
);

CREATE SEQUENCE SEQ_ALARM_NO INCREMENT BY 1 START WITH 1;


CREATE TABLE BGROUP(
  BOARD_GROUP_NO NUMBER NOT NULL,
  BGROUP_NAME VARCHAR2(30) NOT NULL
);

CREATE SEQUENCE SEQ_BGROUP_NO INCREMENT BY 1 START WITH 1;

CREATE TABLE BTAG(
  BOARD_TAG_NO VARCHAR2(10) NOT NULL,
  TAG_NAME VARCHAR2(20) NOT NULL
);

CREATE SEQUENCE SEQ_BTAG_NO INCREMENT BY 1 START WITH 1;

CREATE TABLE FOLLOW(
  FOLLOW_NO NUMBER NOT NULL,
  MEMBER_NO NUMBER,
  FOLLOW_MEMBER_NO NUMBER
);

CREATE SEQUENCE SEQ_FOLLOW_NO INCREMENT BY 1 START WITH 1;

CREATE TABLE MSG(
  MSG_NO NUMBER NOT NULL,
  SEND_NICK VARCHAR2(30) NOT NULL,
  RECV_NICK VARCHAR2(30) NOT NULL,
  SEND_DATE DATE NOT NULL,
  MSG_CONTENT VARCHAR2(300) NOT NULL,
  MEMBER_NO NUMBER NOT NULL
);

CREATE SEQUENCE SEQ_MSG_NO INCREMENT BY 1 START WITH 1;

CREATE TABLE SCRAP(
  SCRAP_NO NUMBER NOT NULL,
  MEMBER_NO NUMBER NOT NULL,
  BOARD_NO NUMBER NOT NULL
);

CREATE SEQUENCE SEQ_SCRAP_NO INCREMENT BY 1 START WITH 1;













------------------------------------------------------------------
--외래키 작성문

ALTER TABLE BOARD 
ADD CONSTRAINTS FK_BOARD_MEMBER_NO FOREIGN KEY (MEMBER_NO)
REFERENCES MEMBER(MEMBER_NO);

ALTER TABLE BOARD 
ADD CONSTRAINTS FK_BOARD_BOARD_GROUP_NO FOREIGN KEY (BOARD_GROUP_NO)
REFERENCES BGROUP(BOARD_GROUP_NO);

ALTER TABLE BOARD 
ADD CONSTRAINTS FK_BOARD_BOARD_TAG_NO FOREIGN KEY (BOARD_TAG_NO)
REFERENCES BTAG(BOARD_TAG_NO);



ALTER TABLE BCOMMENT
ADD CONSTRAINTS FK_BCOMMENT_BOARD_NO FOREIGN KEY (BOARD_NO)
REFERENCES BOARD(BOARD_NO);

ALTER TABLE BCOMMENT
ADD CONSTRAINTS FK_BCOMMENT_BOARD_GROUP_NO FOREIGN KEY (BOARD_GROUP_NO)
REFERENCES BGROUP(BOARD_GROUP_NO);

ALTER TABLE BCOMMENT
ADD CONSTRAINTS FK_BCOMMENT_MEMBER_NO FOREIGN KEY (MEMBER_NO)
REFERENCES MEMBER(MEMBER_NO);



ALTER TABLE BFILE
ADD CONSTRAINTS FK_BFILE_BOARD_NO FOREIGN KEY (BOARD_NO)
REFERENCES BOARD(BOARD_NO);

ALTER TABLE BFILE
ADD CONSTRAINTS FK_BFILE_NOTI_NO FOREIGN KEY (NOTI_NO)
REFERENCES NOTICE(NOTI_NO);

ALTER TABLE BFILE
ADD CONSTRAINTS FK_BFILE_BCOMMENT_NO FOREIGN KEY (BCOMMENT_NO)
REFERENCES BCOMMENT(BCOMMENT_NO);




ALTER TABLE NOTICE
ADD CONSTRAINTS FK_NOTICE_MEMBER_NO FOREIGN KEY (MEMBER_NO)
REFERENCES MEMBER(MEMBER_NO);



ALTER TABLE MSG 
ADD CONSTRAINTS FK_MSG_MEMBER_NO FOREIGN KEY (MEMBER_NO)
REFERENCES MEMBER(MEMBER_NO);



ALTER TABLE ALARM
ADD CONSTRAINTS FK_ALARM_MEMBER_NO FOREIGN KEY (MEMBER_NO)
REFERENCES MEMBER(MEMBER_NO);

ALTER TABLE ALARM
ADD CONSTRAINTS FK_ALARM_BCOMMENT_NO FOREIGN KEY (BCOMMENT_NO)
REFERENCES BCOMMENT(BCOMMENT_NO);


ALTER TABLE FOLLOW
ADD CONSTRAINTS FK_FOLLOW_MEMBER_NO FOREIGN KEY (MEMBER_NO)
REFERENCES MEMBER(MEMBER_NO);


ALTER TABLE SCRAP
ADD CONSTRAINTS FK_SCRAP_MEMBER_NO FOREIGN KEY (MEMBER_NO)
REFERENCES MEMBER(MEMBER_NO);

ALTER TABLE SCRAP
ADD CONSTRAINTS FK_SCRAP_BOARD_NO FOREIGN KEY (BOARD_NO)
REFERENCES BOARD(BOARD_NO);


----------------------------------------------------------------------------------
[INSERT 작성문]

INSERT INTO BOARD
VALUES (1,1,'BOARD_TITLE', 'BOARD_CONTENT', '2022-05-12', 7,7,7, 'Y',1,1);

INSERT INTO BCOMMENT
VALUES (1,1,1,'BCOMMENT_CONTENT','2022-05-12',1,7,7,1,1,1);

INSERT INTO BFILE
VALUES (1,1,'ORG_FILE_NAME','STORED_FILE_NAME', 33,'2022-05-12','N',1,1);

INSERT INTO NOTICE
VALUES (1,1,'NOTI_TITLE','NOTI_CONTENT','2022-05-12',7,'Y');

INSERT INTO MEMBER
VALUES (1,'MEMBER_ID', 'MEMBER_PW', 'MEMBER_NAME', 'MEMBER_EAMIL', 'N', 'MEMBER_NICK', 'N','2022-05-12', 'N', 777);

INSERT INTO ALARM
VALUES (1,1,1,'2022-05-12');

INSERT INTO BGROUP
VALUES (1,'BGROUP_NAME');

INSERT INTO BTAG
VALUES (1,'TAG_NAME');

INSERT INTO FOLLOW
VALUES (1,1,1);

INSERT INTO MSG
VALUES(1, 'SEND_NICK', 'RECV_NICK', '2022-05-12', 'MSG_CONTENT', 1);

INSERT INTO SCRAP
VALUES(1,1,1);

테이블 삭제
1. 삭제할 테이블을 참조하는 FK 칼럼 찾기
2. 해당 칼럼의 테이블로 가서 제약조건 삭제
 -ALTER TABLE SEE_INFO DROP CONSTRAINT 외래키 이름;
3. 삭제할 테이블의 PK키 삭제
 -ALTER TABLE SEE_INFO DROP CONSTRAINT 기본키이름;
4. 테이블 삭제
 - DROP TABLE 테이블명